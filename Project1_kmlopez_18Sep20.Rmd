---
title: "Project 1 - Karen Lopez"
date: "September 18, 2020"
output:
  rmarkdown::github_document:
    toc: true
knit: (function(input, ...){
  rmarkdown::render(
    input,
    output_file="README.md",
    envir=globalenv()
  )})
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
# Reading and Summarizing Data from the NHL's API
This vignette was compiled to provide detailed instructions on reading and summarizing data from the National Hockey League's, or NHL's, API using R code.

## Required Packages
First, install and read in the necessary packages, as shown below. Packages only need to be installed once, but code is included in comment.  
```{r packages, message=FALSE}
#install.packages("tidyverse")
#library(tidyverse)
library(httr)
library(jsonlite)
```

## Contact and Get Data
This code contains functions that will contact the [NHL records API](https://gitlab.com/dword4/nhlapi/-/blob/master/records-api.md) and [NHL stat API](https://gitlab.com/dword4/nhlapi/-/blob/master/stats-api.md), and return parsed, well-formatted data.  
```{r getData}
#function that creates the url for the records API
getUrl <- function(input){
  baseUrl <- "https://records.nhl.com/site/api/franchise"
  table <- input
  fullURL <- paste0(baseUrl, table) #create url
}
print(getUrl(NULL))

franchise <- function(){
  franchiseAPI <- GET(getUrl(NULL))
  franchiseAPI #check connection
  
  franchiseText <- content(franchiseAPI, "text") #convert to JSON text form
  #franchiseText #check dataset
  franchiseList <- fromJSON(franchiseText, flatten=TRUE) #convert form to df
  #franchiseList #check dataset

  #return(parsedData)
}

teamTotals <- function(){
  teamAPI <- GET(getUrl("-team-totals"))
  teamAPI #check connection
  
  teamText <- content(teamAPI, "text") #convert to JSON text form
  #teamText #check dataset
  teamList <- fromJSON(teamText, flatten=TRUE) #convert form to df
  #teamList #check dataset

  #return(parsedData)
}
```
```{r notReady, eval=FALSE, include=FALSE}
seasonRecords <- function(ID){
  seasonAPI <- GET(getUrl("-season-results?cayenneExp=franchiseId=24&sort=seasonId&dir=DESC"))
  seasonAPI #check connection
  
  seasonText <- content(seasonAPI, "text") #convert to JSON text form
  #seasonText #check dataset
  seasonList <- fromJSON(seasonText, flatten=TRUE) #convert form to df
  #seasonList #check dataset

  #return(parsedData)
}

goalieRecords <- function(ID){
  goalieAPI <- GET(getUrl("-goalie-records?cayenneExp=franchiseId=ID"))
  goalieAPI #check connection
  
  goalieText <- content(goalieAPI, "text") #convert to JSON text form
  #goalieText #check dataset
  goalieList <- fromJSON(goalieText, flatten=TRUE) #convert form to df
  #goalieList #check dataset

  #return(parsedData)
}

skaterRecords <- function(ID){
  skaterAPI <- GET(getUrl("-skater-records?cayenneExp=franchiseId=ID"))
  skaterAPI #check connection
  
  skaterText <- content(skaterAPI, "text") #convert to JSON text form
  #skaterText #check dataset
  skaterList <- fromJSON(skaterText, flatten=TRUE) #convert form to df
  #skaterList #check dataset

  #return(parsedData)
}



#from stats API
teams <- function(){}
```

## Wrapper Function

```{r wrapperFcn}
allAccess <- function(){}
```

## Exploratory Analysis

```{r exploreAnalysis}
#do a join

#create 2 new variables

#create some contingency tables

#create numerical summaries

#create 5 plots

```
